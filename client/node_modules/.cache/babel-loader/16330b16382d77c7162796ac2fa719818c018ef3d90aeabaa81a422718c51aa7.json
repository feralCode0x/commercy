{"ast":null,"code":"import React,{Fragment,useState,useEffect,useContext}from\"react\";import{useParams}from\"react-router-dom\";import{ProductDetailsContext}from\"./index\";import{LayoutContext}from\"../layout\";import Submenu from\"./Submenu\";import ProductDetailsSectionTwo from\"./ProductDetailsSectionTwo\";import{getSingleProduct}from\"./FetchApi\";import{cartListProduct}from\"../partials/FetchApi\";import{isWishReq,unWishReq,isWish}from\"../home/Mixins\";import{updateQuantity,slideImage,addToCart,cartList}from\"./Mixins\";import{totalCost}from\"../partials/Mixins\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const apiURL=process.env.REACT_APP_API_URL;const ProductDetailsSection=props=>{let{id}=useParams();const{data,dispatch}=useContext(ProductDetailsContext);const{data:layoutData,dispatch:layoutDispatch}=useContext(LayoutContext);// Layout Context\nconst sProduct=layoutData.singleProductDetail;const[pImages,setPimages]=useState(null);const[count,setCount]=useState(0);// Slide change state\nconst[quantitiy,setQuantitiy]=useState(1);// Increse and decrese quantity state\nconst[,setAlertq]=useState(false);// Alert when quantity greater than stock\nconst[wList,setWlist]=useState(JSON.parse(localStorage.getItem(\"wishList\")));// Wishlist State Control\nuseEffect(()=>{fetchData();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);const fetchData=async()=>{dispatch({type:\"loading\",payload:true});try{let responseData=await getSingleProduct(id);setTimeout(()=>{if(responseData.Product){layoutDispatch({type:\"singleProductDetail\",payload:responseData.Product});// Dispatch in layout context\nsetPimages(responseData.Product.pImages);dispatch({type:\"loading\",payload:false});layoutDispatch({type:\"inCart\",payload:cartList()});// This function change cart in cart state\n}if(responseData.error){console.log(responseData.error);}},500);}catch(error){console.log(error);}fetchCartProduct();// Updating cart total\n};const fetchCartProduct=async()=>{try{let responseData=await cartListProduct();if(responseData&&responseData.Products){layoutDispatch({type:\"cartProduct\",payload:responseData.Products});// Layout context Cartproduct fetch and dispatch\n}}catch(error){console.log(error);}};if(data.loading){return/*#__PURE__*/_jsx(\"div\",{className:\"col-span-2 md:col-span-3 lg:col-span-4 flex items-center justify-center h-screen\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-12 h-12 animate-spin text-gray-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"https://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"})})});}else if(!sProduct){return/*#__PURE__*/_jsx(\"div\",{children:\"No product\"});}return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Submenu,{value:{categoryId:sProduct.pCategory._id,product:sProduct.pName,category:sProduct.pCategory.cName}}),/*#__PURE__*/_jsx(\"section\",{className:\"m-4 md:mx-12 md:my-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hidden md:block md:col-span-1 md:flex md:flex-col md:space-y-4 md:mr-2\",children:[/*#__PURE__*/_jsx(\"img\",{onClick:e=>slideImage(\"increase\",0,count,setCount,pImages),className:\"\".concat(count===0?\"\":\"opacity-25\",\" cursor-pointer w-20 h-20 object-cover object-center\"),src:\"\".concat(apiURL,\"/uploads/products/\").concat(sProduct.pImages[0]),alt:\"pic\"}),/*#__PURE__*/_jsx(\"img\",{onClick:e=>slideImage(\"increase\",1,count,setCount,pImages),className:\"\".concat(count===1?\"\":\"opacity-25\",\" cursor-pointer w-20 h-20 object-cover object-center\"),src:\"\".concat(apiURL,\"/uploads/products/\").concat(sProduct.pImages[1]),alt:\"pic\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-2 md:col-span-7\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"w-full\",src:\"\".concat(apiURL,\"/uploads/products/\").concat(sProduct.pImages[count]),alt:\"Pic\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute inset-0 flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"svg\",{onClick:e=>slideImage(\"increase\",null,count,setCount,pImages),className:\"flex justify-center  w-12 h-12 text-gray-700 opacity-25 cursor-pointer hover:text-yellow-700 hover:opacity-100\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"https://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 19l-7-7 7-7\"})}),/*#__PURE__*/_jsx(\"svg\",{onClick:e=>slideImage(\"increase\",null,count,setCount,pImages),className:\"flex justify-center  w-12 h-12 text-gray-700 opacity-25 cursor-pointer hover:text-yellow-700 hover:opacity-100\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"https://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 5l7 7-7 7\"})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2 mt-8 md:mt-0 md:col-span-4 md:ml-6 lg:ml-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col leading-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl tracking-wider\",children:sProduct.pName}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl tracking-wider text-yellow-700\",children:[\"$\",sProduct.pPrice,\".00\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"svg\",{onClick:e=>isWishReq(e,sProduct._id,setWlist),className:\"\".concat(isWish(sProduct._id,wList)&&\"hidden\",\" w-5 h-5 md:w-6 md:h-6 cursor-pointer text-yellow-700\"),fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"https://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"})}),/*#__PURE__*/_jsx(\"svg\",{onClick:e=>unWishReq(e,sProduct._id,setWlist),className:\"\".concat(!isWish(sProduct._id,wList)&&\"hidden\",\" w-5 h-5 md:w-6 md:h-6 cursor-pointer text-yellow-700\"),fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"https://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z\",clipRule:\"evenodd\"})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"my-4 md:my-6 text-gray-600\",children:sProduct.pDescription}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-4 md:my-6\",children:[+quantitiy===+sProduct.pQuantity?/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-red-500\",children:\"Stock limited\"}):\"\",/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center px-4 py-2 border \".concat(+quantitiy===+sProduct.pQuantity&&\"border-red-500\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(quantitiy===sProduct.pQuantity&&\"text-red-500\"),children:\"Quantity\"}),sProduct.pQuantity!==0?/*#__PURE__*/_jsx(Fragment,{children:layoutData.inCart==null||layoutData.inCart!==null&&layoutData.inCart.includes(sProduct._id)===false?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:e=>updateQuantity(\"decrease\",sProduct.pQuantity,quantitiy,setQuantitiy,setAlertq),children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 fill-current cursor-pointer\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"https://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:quantitiy}),/*#__PURE__*/_jsx(\"span\",{onClick:e=>updateQuantity(\"increase\",sProduct.pQuantity,quantitiy,setQuantitiy,setAlertq),children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 fill-current cursor-pointer\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"https://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\",clipRule:\"evenodd\"})})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 fill-current cursor-not-allowed\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"https://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:quantitiy}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 fill-current cursor-not-allowed\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"https://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\",clipRule:\"evenodd\"})})})]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 fill-current cursor-not-allowed\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"https://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:quantitiy}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 fill-current cursor-not-allowed\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"https://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\",clipRule:\"evenodd\"})})})]})]}),sProduct.pQuantity!==0?/*#__PURE__*/_jsx(Fragment,{children:layoutData.inCart!==null&&layoutData.inCart.includes(sProduct._id)===true?/*#__PURE__*/_jsx(\"div\",{style:{background:\"#303031\"},className:\"px-4 py-2 text-white text-center cursor-not-allowed uppercase opacity-75\",children:\"In cart\"}):/*#__PURE__*/_jsx(\"div\",{onClick:e=>addToCart(sProduct._id,quantitiy,sProduct.pPrice,layoutDispatch,setQuantitiy,setAlertq,fetchData,totalCost),style:{background:\"#303031\"},className:\"px-4 py-2 text-white text-center cursor-pointer uppercase\",children:\"Add to cart\"})}):/*#__PURE__*/_jsx(Fragment,{children:layoutData.inCart!==null&&layoutData.inCart.includes(sProduct._id)===true?/*#__PURE__*/_jsx(\"div\",{style:{background:\"#303031\"},className:\"px-4 py-2 text-white text-center cursor-not-allowed uppercase opacity-75\",children:\"In cart\"}):/*#__PURE__*/_jsx(\"div\",{style:{background:\"#303031\"},disabled:true,className:\"px-4 py-2 text-white opacity-50 cursor-not-allowed text-center uppercase\",children:\"Out of stock\"})})]})]})]})}),/*#__PURE__*/_jsx(ProductDetailsSectionTwo,{})]});};export default ProductDetailsSection;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}