{"ast":null,"code":"import _objectSpread from\"/home/zetecoder/commercy/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{Fragment,useEffect,useContext,useState}from\"react\";import{useHistory}from\"react-router-dom\";import{LayoutContext}from\"../layout\";import{subTotal,quantity,totalCost}from\"../partials/Mixins\";import{cartListProduct}from\"../partials/FetchApi\";import{getBrainTreeToken,getPaymentProcess}from\"./FetchApi\";import{fetchData,fetchbrainTree,pay}from\"./Action\";import DropIn from\"braintree-web-drop-in-react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const apiURL=process.env.REACT_APP_API_URL;export const CheckoutComponent=props=>{const history=useHistory();const{data,dispatch}=useContext(LayoutContext);const[state,setState]=useState({address:\"\",phone:\"\",error:false,success:false,clientToken:null,instance:{}});useEffect(()=>{fetchData(cartListProduct,dispatch);fetchbrainTree(getBrainTreeToken,setState);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);if(data.loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center h-screen\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-12 h-12 animate-spin text-gray-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"https://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"})}),\"Please wait untill finish\"]});}return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"section\",{className:\"mx-4 mt-20 md:mx-12 md:mt-32 lg:mt-24\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl mx-2\",children:\"Order\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex md:space-x-2 md:flex-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:w-1/2\",children:/*#__PURE__*/_jsx(CheckoutProducts,{products:data.cartProduct})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full order-first md:order-last md:w-1/2\",children:state.clientToken!==null?/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{onBlur:e=>setState(_objectSpread(_objectSpread({},state),{},{error:false})),className:\"p-4 md:p-8\",children:[state.error?/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-200 py-2 px-4 rounded\",children:state.error}):\"\",/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col py-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"address\",className:\"pb-2\",children:\"Dalivery Address\"}),/*#__PURE__*/_jsx(\"input\",{value:state.address,onChange:e=>setState(_objectSpread(_objectSpread({},state),{},{address:e.target.value,error:false})),type:\"text\",id:\"address\",className:\"border px-4 py-2\",placeholder:\"Address...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col py-2 mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",className:\"pb-2\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{value:state.phone,onChange:e=>setState(_objectSpread(_objectSpread({},state),{},{phone:e.target.value,error:false})),type:\"number\",id:\"phone\",className:\"border px-4 py-2\",placeholder:\"+880\"})]}),/*#__PURE__*/_jsx(DropIn,{options:{authorization:state.clientToken,paypal:{flow:\"vault\"}},onInstance:instance=>state.instance=instance}),/*#__PURE__*/_jsx(\"div\",{onClick:e=>pay(data,dispatch,state,setState,getPaymentProcess,totalCost,history),className:\"w-full px-4 py-2 text-center text-white font-semibold cursor-pointer\",style:{background:\"#303031\"},children:\"Pay now\"})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-12\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-12 h-12 animate-spin text-gray-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"https://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"})})})})]})]})});};const CheckoutProducts=_ref=>{let{products}=_ref;const history=useHistory();return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-1\",children:products!==null&&products.length>0?products.map((product,index)=>{return/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1 m-2 md:py-6 md:border-t md:border-b md:my-2 md:mx-0 md:flex md:items-center md:justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"md:flex md:items-center md:space-x-4\",children:[/*#__PURE__*/_jsx(\"img\",{onClick:e=>history.push(\"/products/\".concat(product._id)),className:\"cursor-pointer md:h-20 md:w-20 object-cover object-center\",src:\"\".concat(apiURL,\"/uploads/products/\").concat(product.pImages[0]),alt:\"wishListproduct\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-lg md:ml-6 truncate\",children:product.pName}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:ml-6 font-semibold text-gray-600 text-sm\",children:[\"Price : $\",product.pPrice,\".00\",\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:ml-6 font-semibold text-gray-600 text-sm\",children:[\"Quantitiy : \",quantity(product._id)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-gray-600 text-sm\",children:[\"Subtotal : $\",subTotal(product._id,product.pPrice),\".00\"]})]})},index);}):/*#__PURE__*/_jsx(\"div\",{children:\"No product found for checkout\"})})});};export default CheckoutProducts;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}