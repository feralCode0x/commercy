{"ast":null,"code":"import _objectSpread from\"/home/zetecoder/commercy/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{Fragment,useState,useContext}from\"react\";import{useParams}from\"react-router-dom\";import{Alert,reviewSubmitHanlder}from\"./Action\";import{LayoutContext}from\"../layout\";import{isAuthenticate}from\"../auth/fetchApi\";import{getSingleProduct}from\"./FetchApi\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const ReviewForm=props=>{const{data,dispatch}=useContext(LayoutContext);let{id}=useParams();// Product Id\nconst[fData,setFdata]=useState({rating:\"\",review:\"\",error:false,success:false,pId:id});if(fData.error||fData.success){setTimeout(()=>{setFdata(_objectSpread(_objectSpread({},fData),{},{error:false,success:false}));},3000);}const fetchData=async()=>{try{let responseData=await getSingleProduct(id);if(responseData.Product){dispatch({type:\"singleProductDetail\",payload:responseData.Product});console.log(data);}if(responseData.error){console.log(responseData.error);}}catch(error){console.log(error);}};const ratingUserList=data.singleProductDetail.pRatingsReviews.map(item=>{return item.user?item.user._id:\"\";});return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:mx-16 lg:mx-20 xl:mx-24 flex flex-col\",children:[fData.error?Alert(\"red\",fData.error):\"\",fData.success?Alert(\"green\",fData.success):\"\"]}),ratingUserList.includes(isAuthenticate().user._id)?/*#__PURE__*/_jsx(\"div\",{className:\"mb-12 md:mx-16 lg:mx-20 xl:mx-24\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"mb-12 md:mx-16 lg:mx-20 xl:mx-24 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-medium\",children:\"Add a review\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 text-sm\",children:\"Your email address will not be published. Required fields are marked *\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"fieldset\",{onChange:e=>setFdata(_objectSpread(_objectSpread({},fData),{},{rating:e.target.value})),className:\"rating\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",className:\"rating\",id:\"star5\",name:\"rating\",defaultValue:5}),/*#__PURE__*/_jsx(\"label\",{className:\"full\",htmlFor:\"star5\",title:\"Awesome - 5 stars\"}),/*#__PURE__*/_jsx(\"input\",{type:\"radio\",className:\"rating\",id:\"star4\",name:\"rating\",defaultValue:4}),/*#__PURE__*/_jsx(\"label\",{className:\"full\",htmlFor:\"star4\",title:\"Pretty good - 4 stars\"}),/*#__PURE__*/_jsx(\"input\",{type:\"radio\",className:\"rating\",id:\"star3\",name:\"rating\",defaultValue:3}),/*#__PURE__*/_jsx(\"label\",{className:\"full\",htmlFor:\"star3\",title:\"Meh - 3 stars\"}),/*#__PURE__*/_jsx(\"input\",{type:\"radio\",className:\"rating\",id:\"star2\",name:\"rating\",defaultValue:2}),/*#__PURE__*/_jsx(\"label\",{className:\"full\",htmlFor:\"star2\",title:\"Kinda bad - 2 stars\"}),/*#__PURE__*/_jsx(\"input\",{type:\"radio\",className:\"rating\",id:\"star1\",name:\"rating\",defaultValue:1}),/*#__PURE__*/_jsx(\"label\",{className:\"full\",htmlFor:\"star1\",title:\"Sucks big time - 1 star\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"textArea\",children:[\"Review \",/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:e=>setFdata(_objectSpread(_objectSpread({},fData),{},{review:e.target.value})),value:fData.review,className:\"border px-4 py-2 focus:outline-none\",name:\"textArea\",id:\"textArea\",cols:30,rows:3,placeholder:\"Your review...\"})]}),/*#__PURE__*/_jsx(\"div\",{onClick:e=>reviewSubmitHanlder(fData,setFdata,fetchData),style:{background:\"#303031\"},className:\"inline-block rounded px-4 py-2 text-white text-center cursor-pointer\",children:\"Submit\"})]})]})]});};export default ReviewForm;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}