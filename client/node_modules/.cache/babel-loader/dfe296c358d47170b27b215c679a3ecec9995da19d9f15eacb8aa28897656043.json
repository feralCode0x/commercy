{"ast":null,"code":"import _objectSpread from\"/home/zetecoder/commercy/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{Fragment,useContext,useState}from\"react\";import{CategoryContext}from\"./index\";import{createCategory,getAllCategory}from\"./FetchApi\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddCategoryModal=props=>{const{data,dispatch}=useContext(CategoryContext);const alert=(msg,type)=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-\".concat(type,\"-200 py-2 px-4 w-full\"),children:msg});const[fData,setFdata]=useState({cName:\"\",cDescription:\"\",cImage:\"\",cStatus:\"Active\",success:false,error:false});const fetchData=async()=>{let responseData=await getAllCategory();if(responseData.Categories){dispatch({type:\"fetchCategoryAndChangeState\",payload:responseData.Categories});}};if(fData.error||fData.success){setTimeout(()=>{setFdata(_objectSpread(_objectSpread({},fData),{},{success:false,error:false}));},2000);}const submitForm=async e=>{dispatch({type:\"loading\",payload:true});// Reset and prevent the form\ne.preventDefault();e.target.reset();if(!fData.cImage){dispatch({type:\"loading\",payload:false});return setFdata(_objectSpread(_objectSpread({},fData),{},{error:\"Please upload a category image\"}));}try{let responseData=await createCategory(fData);if(responseData.success){fetchData();setFdata(_objectSpread(_objectSpread({},fData),{},{cName:\"\",cDescription:\"\",cImage:\"\",cStatus:\"Active\",success:responseData.success,error:false}));dispatch({type:\"loading\",payload:false});setTimeout(()=>{setFdata(_objectSpread(_objectSpread({},fData),{},{cName:\"\",cDescription:\"\",cImage:\"\",cStatus:\"Active\",success:false,error:false}));},2000);}else if(responseData.error){setFdata(_objectSpread(_objectSpread({},fData),{},{success:false,error:responseData.error}));dispatch({type:\"loading\",payload:false});setTimeout(()=>{return setFdata(_objectSpread(_objectSpread({},fData),{},{error:false,success:false}));},2000);}}catch(error){console.log(error);}};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{onClick:e=>dispatch({type:\"addCategoryModal\",payload:false}),className:\"\".concat(data.addCategoryModal?\"\":\"hidden\",\" fixed top-0 left-0 z-30 w-full h-full bg-black opacity-50\")}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(data.addCategoryModal?\"\":\"hidden\",\" fixed inset-0 m-4  flex items-center z-30 justify-center\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-white w-12/12 md:w-3/6 shadow-lg flex flex-col items-center space-y-4  overflow-y-auto px-4 py-4 md:px-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between w-full pt-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-left font-semibold text-2xl tracking-wider\",children:\"Add Category\"}),/*#__PURE__*/_jsx(\"span\",{style:{background:\"#303031\"},onClick:e=>dispatch({type:\"addCategoryModal\",payload:false}),className:\"cursor-pointer text-gray-100 py-2 px-2 rounded-full\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"https://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),fData.error?alert(fData.error,\"red\"):\"\",fData.success?alert(fData.success,\"green\"):\"\",/*#__PURE__*/_jsxs(\"form\",{className:\"w-full\",onSubmit:e=>submitForm(e),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-1 w-full py-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Category Name\"}),/*#__PURE__*/_jsx(\"input\",{onChange:e=>setFdata(_objectSpread(_objectSpread({},fData),{},{success:false,error:false,cName:e.target.value})),value:fData.cName,className:\"px-4 py-2 border focus:outline-none\",type:\"text\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-1 w-full\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Category Description\"}),/*#__PURE__*/_jsx(\"textarea\",{onChange:e=>setFdata(_objectSpread(_objectSpread({},fData),{},{success:false,error:false,cDescription:e.target.value})),value:fData.cDescription,className:\"px-4 py-2 border focus:outline-none\",name:\"description\",id:\"description\",cols:5,rows:5})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-1 w-full\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Category Image\"}),/*#__PURE__*/_jsx(\"input\",{accept:\".jpg, .jpeg, .png\",onChange:e=>{setFdata(_objectSpread(_objectSpread({},fData),{},{success:false,error:false,cImage:e.target.files[0]}));},className:\"px-4 py-2 border focus:outline-none\",type:\"file\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-1 w-full\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"status\",children:\"Category Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",onChange:e=>setFdata(_objectSpread(_objectSpread({},fData),{},{success:false,error:false,cStatus:e.target.value})),className:\"px-4 py-2 border focus:outline-none\",id:\"status\",children:[/*#__PURE__*/_jsx(\"option\",{name:\"status\",value:\"Active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{name:\"status\",value:\"Disabled\",children:\"Disabled\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col space-y-1 w-full pb-4 md:pb-6 mt-4\",children:/*#__PURE__*/_jsx(\"button\",{style:{background:\"#303031\"},type:\"submit\",className:\"bg-gray-800 text-gray-100 rounded-full text-lg font-medium py-2\",children:\"Create category\"})})]})]})})]});};export default AddCategoryModal;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}