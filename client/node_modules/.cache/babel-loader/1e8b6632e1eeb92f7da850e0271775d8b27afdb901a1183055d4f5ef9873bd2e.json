{"ast":null,"code":"import React,{Fragment,useContext,useEffect}from\"react\";import{useHistory}from\"react-router-dom\";import moment from\"moment\";import{DashboardContext}from\"./\";import{todayAllOrders}from\"./Action\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const apiURL=process.env.REACT_APP_API_URL;const SellTable=()=>{const history=useHistory();const{data,dispatch}=useContext(DashboardContext);useEffect(()=>{todayAllOrders(dispatch);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);const ordersList=()=>{let newList=[];if(data.totalOrders.Orders!==undefined){data.totalOrders.Orders.forEach(function(elem){if(moment(elem.createdAt).format(\"LL\")===moment().format(\"LL\")){newList=[...newList,elem];}});}return newList;};return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-1 overflow-auto bg-white shadow-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-semibold mb-6 text-center\",children:[\"Today's Orders\",\" \",data.totalOrders.Orders!==undefined?ordersList().length:0]}),/*#__PURE__*/_jsxs(\"table\",{className:\"table-auto border w-full my-2\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Products\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Image\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Order Address\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Ordered at\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.totalOrders.Orders!==undefined?ordersList().map((item,key)=>{return/*#__PURE__*/_jsx(TodayOrderTable,{order:item.id},key);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",className:\"text-xl text-center font-semibold py-8\",children:\"No orders found today\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 mt-2\",children:[\"Total\",\" \",data.totalOrders.Orders!==undefined?ordersList().length:0,\" \",\"orders found\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(\"span\",{onClick:e=>history.push(\"/admin/dashboard/orders\"),style:{background:\"#303031\"},className:\"cursor-pointer px-4 py-2 text-white rounded-full\",children:\"View All\"})})]})});};const TodayOrderTable=_ref=>{var _order$allProduct,_order$allProduct2;let{order}=_ref;return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"w-48 hover:bg-gray-200 p-2 flex flex-col space-y-1\",children:order===null||order===void 0?void 0:(_order$allProduct=order.allProduct)===null||_order$allProduct===void 0?void 0:_order$allProduct.map((item,index)=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:item.id.pName}),/*#__PURE__*/_jsxs(\"span\",{children:[item.quantitiy,\"x\"]})]},index);})}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 text-left\",children:order===null||order===void 0?void 0:(_order$allProduct2=order.allProduct)===null||_order$allProduct2===void 0?void 0:_order$allProduct2.map((item,index)=>{return/*#__PURE__*/_jsx(\"img\",{className:\"w-12 h-12 object-cover\",src:\"\".concat(apiURL,\"/uploads/products/\").concat(item.id.pImages[0]),alt:\"Pic\"},index);})}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-2 text-center\",children:[(order===null||order===void 0?void 0:order.status)===\"Not processed\"&&/*#__PURE__*/_jsx(\"span\",{className:\"block text-red-600 rounded-full text-center text-xs px-2 font-semibold\",children:order.status}),(order===null||order===void 0?void 0:order.status)===\"Processing\"&&/*#__PURE__*/_jsx(\"span\",{className:\"block text-yellow-600 rounded-full text-center text-xs px-2 font-semibold\",children:order.status}),(order===null||order===void 0?void 0:order.status)===\"Shipped\"&&/*#__PURE__*/_jsx(\"span\",{className:\"block text-blue-600 rounded-full text-center text-xs px-2 font-semibold\",children:order===null||order===void 0?void 0:order.status}),(order===null||order===void 0?void 0:order.status)===\"Delivered\"&&/*#__PURE__*/_jsx(\"span\",{className:\"block text-green-600 rounded-full text-center text-xs px-2 font-semibold\",children:order.status}),(order===null||order===void 0?void 0:order.status)===\"Cancelled\"&&/*#__PURE__*/_jsx(\"span\",{className:\"block text-red-600 rounded-full text-center text-xs px-2 font-semibold\",children:order===null||order===void 0?void 0:order.status})]}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 text-center\",children:order===null||order===void 0?void 0:order.address}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 text-center\",children:moment(order===null||order===void 0?void 0:order.createdAt).format(\"lll\")})]})});};const TodaySell=props=>{return/*#__PURE__*/_jsx(\"div\",{className:\"m-4\",children:/*#__PURE__*/_jsx(SellTable,{})});};export default TodaySell;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}