{"ast":null,"code":"import React,{Fragment,useContext,useEffect}from\"react\";import moment from\"moment\";import{OrderContext}from\"./index\";import{fetchData,editOrderReq,deleteOrderReq}from\"./Actions\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const apiURL=process.env.REACT_APP_API_URL;const AllCategory=props=>{const{data,dispatch}=useContext(OrderContext);const{orders,loading}=data;useEffect(()=>{fetchData(dispatch);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center p-8\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-12 h-12 animate-spin text-gray-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"https://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"})})});}return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-1 overflow-auto bg-white shadow-lg p-4\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table-auto border w-full my-2\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Products\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Transaction Id\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Customer\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Created at\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Updated at\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders&&orders.length>0?orders.map((item,i)=>{return/*#__PURE__*/_jsx(CategoryTable,{order:item,editOrder:(oId,type,status)=>editOrderReq(oId,type,status,dispatch)},i);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"12\",className:\"text-xl text-center font-semibold py-8\",children:\"No order found\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 mt-2\",children:[\"Total \",orders&&orders.length,\" order found\"]})]})});};/* Single Category Component */const CategoryTable=_ref=>{var _order$allProduct;let{order,editOrder}=_ref;const{dispatch}=useContext(OrderContext);return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"w-48 hover:bg-gray-200 p-2 flex flex-col space-y-1\",children:order===null||order===void 0?void 0:(_order$allProduct=order.allProduct)===null||_order$allProduct===void 0?void 0:_order$allProduct.map((product,i)=>{var _product$id,_product$id2;return/*#__PURE__*/_jsxs(\"span\",{className:\"block flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"w-8 h-8 object-cover object-center\",src:\"\".concat(apiURL,\"/uploads/products/\").concat(product===null||product===void 0?void 0:(_product$id=product.id)===null||_product$id===void 0?void 0:_product$id.pImages[0]),alt:\"productImage\"}),/*#__PURE__*/_jsx(\"span\",{children:product===null||product===void 0?void 0:(_product$id2=product.id)===null||_product$id2===void 0?void 0:_product$id2.pName}),/*#__PURE__*/_jsxs(\"span\",{children:[product.quantitiy,\"x\"]})]},i);})}),/*#__PURE__*/_jsxs(\"td\",{className:\"hover:bg-gray-200 p-2 text-center cursor-default\",children:[order.status===\"Not processed\"&&/*#__PURE__*/_jsx(\"span\",{className:\"block text-red-600 rounded-full text-center text-xs px-2 font-semibold\",children:order.status}),order.status===\"Processing\"&&/*#__PURE__*/_jsx(\"span\",{className:\"block text-yellow-600 rounded-full text-center text-xs px-2 font-semibold\",children:order.status}),order.status===\"Shipped\"&&/*#__PURE__*/_jsx(\"span\",{className:\"block text-blue-600 rounded-full text-center text-xs px-2 font-semibold\",children:order.status}),order.status===\"Delivered\"&&/*#__PURE__*/_jsx(\"span\",{className:\"block text-green-600 rounded-full text-center text-xs px-2 font-semibold\",children:order.status}),order.status===\"Cancelled\"&&/*#__PURE__*/_jsx(\"span\",{className:\"block text-red-600 rounded-full text-center text-xs px-2 font-semibold\",children:order.status})]}),/*#__PURE__*/_jsxs(\"td\",{className:\"hover:bg-gray-200 p-2 text-center\",children:[\"$\",order.amount,\".00\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"hover:bg-gray-200 p-2 text-center\",children:order.transactionId}),/*#__PURE__*/_jsx(\"td\",{className:\"hover:bg-gray-200 p-2 text-center\",children:order.user.name}),/*#__PURE__*/_jsx(\"td\",{className:\"hover:bg-gray-200 p-2 text-center\",children:order.user.email}),/*#__PURE__*/_jsx(\"td\",{className:\"hover:bg-gray-200 p-2 text-center\",children:order.phone}),/*#__PURE__*/_jsx(\"td\",{className:\"hover:bg-gray-200 p-2 text-center\",children:order.address}),/*#__PURE__*/_jsx(\"td\",{className:\"hover:bg-gray-200 p-2 text-center\",children:moment(order.createdAt).format(\"lll\")}),/*#__PURE__*/_jsx(\"td\",{className:\"hover:bg-gray-200 p-2 text-center\",children:moment(order.updatedAt).format(\"lll\")}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-2 flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:e=>editOrder(order._id,true,order.status),className:\"cursor-pointer hover:bg-gray-200 rounded-lg p-2 mx-1\",children:/*#__PURE__*/_jsxs(\"svg\",{className:\"w-6 h-6 fill-current text-green-500\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"https://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z\"}),/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z\",clipRule:\"evenodd\"})]})}),/*#__PURE__*/_jsx(\"span\",{onClick:e=>deleteOrderReq(order._id,dispatch),className:\"cursor-pointer hover:bg-gray-200 rounded-lg p-2 mx-1\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 text-red-500\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"https://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})})})]})]})});};export default AllCategory;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}